# 휴지통 관리 모듈 ✅

## 2.1 모듈 개요

휴지통 관리 모듈은 파일 관리 모듈에서 삭제된 파일을 일정 기간 보관하고,

**복구 또는 영구 삭제**를 통해 파일의 생애주기를 마무리하는 역할을 수행한다.

본 모듈은 **Admin 권한 사용자만 접근 가능**하며,

실수로 삭제된 파일의 복구 가능성을 제공함과 동시에

시스템 저장 공간을 효율적으로 관리하는 것을 목표로 한다.

---

## 2.2 사용자 및 권한 범위

휴지통 관리 모듈은 다음 권한 정책을 따른다.

| 기능 | User | Manager | Admin |
| --- | --- | --- | --- |
| 휴지통 목록 조회 | X | X | O |
| 파일 복구 | X | X | O |
| 파일 영구 삭제 | X | X | O |

---

## 2.3 휴지통 파일 목록 조회

- 휴지통에는 삭제된 파일 목록이 표시된다.
- 각 파일에 대해 다음 정보를 제공한다.
    - 파일명
    - 삭제 일시
    - 원래 경로
    - 삭제 정보
- 파일 목록은 정렬을 지원한다.

---

## 2.4 파일 복구 정책

### 2.4.1 개별 파일 복구

- 휴지통에 존재하는 파일 1개를 선택하여 복구할 수 있다.
- 원래 경로가 존재하는 경우, 해당 경로로 복구한다.
- 원래 경로가 존재하지 않는 경우, 사용자는 복구 경로를 지정해야 한다.

---

### 2.4.2 다중 파일 복구

- 다중 선택된 파일에 대해 복구를 수행할 수 있다.
- 기본적으로 **원래 경로가 존재하는 파일만 복구 대상**으로 제출된다.
- 원래 경로가 없는 파일은 사용자가 복구 경로를 지정한 경우에만 복구 대상에 포함된다.
- 복구 결과는 파일 단위로 안내된다.

---

## 2.5 파일 영구 삭제 정책

- 휴지통에 존재하는 파일은 영구 삭제할 수 있다.
- 영구 삭제는 **되돌릴 수 없는 작업**으로, 삭제 전 확인 절차를 거친다.
- 영구 삭제된 파일은 REMOVED 상태로 전이되며, SOFT DELETE된다.

---

## 2.6 휴지통 보존 기간 정책

- 삭제된 파일은 휴지통에 **정해진 보존 기간(예: 30일)** 동안 유지된다.
- 보존 기간이 만료된 파일은 시스템에 의해 자동으로 영구 삭제된다.
- 자동 삭제는 배치 작업으로 수행된다.

---

## 2.7 예외 및 공통 처리 원칙

- 복구 대상 파일이 이미 존재하는 경우, 충돌 방지 정책에 따라 처리한다.
- 휴지통 작업 중 오류 발생 시, 오류 메시지를 표시하고 재시도를 안내한다.
- 모든 복구 및 영구 삭제 이력은 로그로 기록된다.