---
name: test-code-korean-docs
description: spec.ts 테스트 코드를 한국어로 번역하고 상세한 설명을 추가. Use when user asks to explain test code, translate tests to Korean, add Korean comments to spec files, or improve test documentation for Korean developers.
---

# 테스트 코드 한국어 문서화

## Overview

테스트 코드(spec.ts)에 한국어 설명을 추가하여 한국인 개발자들이 쉽게 이해할 수 있도록 문서화.

**Core principle:** 테스트는 단순히 "무엇을 테스트하는지"가 아니라 "왜 이 테스트가 필요한지"까지 설명해야 한다.

## When to Use

- 테스트 코드에 한국어 설명 추가 요청 시
- 테스트 파일의 가독성 개선 요청 시
- 새로운 팀원을 위한 테스트 문서화 필요 시
- 테스트가 무엇을 검증하는지 이해가 어려울 때
- PR 리뷰를 위해 테스트 의도를 명확히 해야 할 때

## 문서화 원칙

### 1. 3단계 설명 구조

모든 테스트에는 세 가지 관점의 설명이 필요:

```
WHAT (무엇을): 이 테스트가 검증하는 기능
WHY (왜): 이 테스트가 필요한 비즈니스/기술적 이유
HOW (어떻게): 테스트가 검증을 수행하는 방식
```

### 2. 설명 깊이 기준

| 대상 | 설명 깊이 |
|------|----------|
| `describe` 블록 | 전체 기능 개요 + 비즈니스 맥락 |
| `it` 블록 | 구체적 시나리오 + 왜 이 케이스가 중요한지 |
| Given/When/Then | 각 단계의 의미 + 테스트 데이터 선택 이유 |
| Mock 설정 | 왜 이 mock이 필요한지 + 실제 동작과의 관계 |

## 문서화 템플릿

### describe 블록 문서화

```typescript
/**
 * ============================================================
 * 📦 [기능명] 테스트
 * ============================================================
 * 
 * 🎯 테스트 대상:
 *   - [테스트하는 클래스/함수명]
 *   
 * 📋 비즈니스 맥락:
 *   - [이 기능이 시스템에서 어떤 역할을 하는지]
 *   - [왜 이 기능이 필요한지]
 * 
 * 🔗 관련 요구사항:
 *   - [관련된 비즈니스 요구사항이나 유저 스토리]
 * 
 * ⚠️ 중요 고려사항:
 *   - [이 기능을 테스트할 때 주의할 점]
 * ============================================================
 */
describe('FeatureName', () => {
  // ...
});
```

### it 블록 문서화

```typescript
/**
 * 📌 테스트 시나리오: [시나리오 한글 설명]
 * 
 * 🎯 검증 목적:
 *   [왜 이 케이스를 테스트해야 하는지 설명]
 * 
 * 📊 테스트 조건:
 *   - 전제조건 1: [조건 설명]
 *   - 전제조건 2: [조건 설명]
 * 
 * ✅ 기대 결과:
 *   [성공 시 어떤 결과가 나와야 하는지]
 * 
 * 💡 참고:
 *   [추가 설명이나 주의사항]
 */
it('should do something when condition', async () => {
  // ...
});
```

### Given-When-Then 패턴 문서화

```typescript
it('should return X when Y', async () => {
  // ═══════════════════════════════════════════════════════
  // 📥 GIVEN (사전 조건 설정)
  // ═══════════════════════════════════════════════════════
  // 
  // 🔧 테스트 데이터 설명:
  //   - request: [이 요청 데이터가 의미하는 것]
  //   - mockData: [왜 이런 mock 데이터를 사용하는지]
  //
  const request = { /* ... */ };
  mockRepository.findById.mockResolvedValue({ /* ... */ });
  
  // ═══════════════════════════════════════════════════════
  // 🎬 WHEN (테스트 실행)
  // ═══════════════════════════════════════════════════════
  // 
  // 📝 실행 설명:
  //   [어떤 메서드를 어떤 파라미터로 호출하는지]
  //
  const result = await service.someMethod(request);
  
  // ═══════════════════════════════════════════════════════
  // ✅ THEN (결과 검증)
  // ═══════════════════════════════════════════════════════
  // 
  // 🔍 검증 포인트:
  //   - [각 assertion이 무엇을 확인하는지]
  //   - [왜 이 값을 확인해야 하는지]
  //
  expect(result).toEqual(expectedValue);
});
```

## Mock 설명 가이드

Mock 설정에는 반드시 다음을 설명:

```typescript
/**
 * 🎭 Mock 설정
 * 
 * 📍 mockRepository.findById:
 *   - 실제 동작: DB에서 ID로 엔티티 조회
 *   - Mock 이유: 실제 DB 연결 없이 테스트하기 위함
 *   - 반환값 의미: 정상적으로 조회된 엔티티 상태
 * 
 * 📍 mockExternalService.call:
 *   - 실제 동작: 외부 API 호출
 *   - Mock 이유: 외부 의존성 제거 + 테스트 속도
 *   - 반환값 의미: API 성공 응답 시나리오
 */
mockRepository.findById.mockResolvedValue({
  id: 'test-id',
  name: 'test-name',
  // ...
});
```

## 전체 파일 문서화 예시

실제 적용 예시는 [examples.md](examples.md) 참조.

## 문서화 워크플로우

### Step 1: 파일 분석

```
1. 테스트 파일의 describe 구조 파악
2. 각 테스트가 검증하는 기능 식별
3. 비즈니스 맥락과 연결점 파악
4. 사용된 mock들의 역할 이해
```

### Step 2: 최상위 문서화

```
1. 파일 상단에 전체 테스트 개요 추가
2. describe 블록별 기능 설명 추가
3. mock 설정에 대한 설명 추가
```

### Step 3: 개별 테스트 문서화

```
1. 각 it 블록에 시나리오 설명 추가
2. Given/When/Then 구조로 주석 분리
3. 각 assertion의 의도 설명
```

### Step 4: 검토

```
1. 한국어가 자연스러운지 확인
2. 불필요한 중복 설명 제거
3. 일관된 용어 사용 확인
```

## 용어 일관성 가이드

| 영어 | 한국어 권장 |
|------|------------|
| Assert/Expect | 검증 |
| Mock | 목(Mock) 또는 가짜 객체 |
| Stub | 스텁 |
| Given | 사전 조건 / 주어진 조건 |
| When | 실행 / ~할 때 |
| Then | 결과 검증 / 그러면 |
| Should | ~해야 한다 |
| Return | 반환 |
| Throw | 예외 발생 |
| Edge case | 경계 케이스 / 예외 상황 |
| Happy path | 정상 흐름 |
| Error case | 에러 케이스 |

## 품질 체크리스트

문서화 완료 전 확인:

- [ ] 모든 describe 블록에 기능 개요가 있는가?
- [ ] 모든 it 블록에 테스트 목적이 설명되어 있는가?
- [ ] Given/When/Then이 명확히 구분되어 있는가?
- [ ] Mock 설정의 이유가 설명되어 있는가?
- [ ] 비즈니스 맥락이 포함되어 있는가?
- [ ] 한국어 표현이 자연스러운가?
- [ ] 용어가 일관되게 사용되었는가?
- [ ] 불필요한 중복 설명은 없는가?

## 간소화 버전

매우 단순한 테스트의 경우 간소화 버전 사용:

```typescript
describe('SimpleFeature', () => {
  /** 기능: 간단한 값 반환 검증 */
  it('should return value', () => {
    // Given: 테스트 입력값
    const input = 'test';
    
    // When: 함수 실행
    const result = simpleFunction(input);
    
    // Then: 결과가 기대값과 일치하는지 확인
    expect(result).toBe('expected');
  });
});
```

## Red Flags - 피해야 할 패턴

- ❌ 영어 직역 ("그것은 ~해야 한다")
- ❌ 코드 내용 반복 (`// id를 'test-id'로 설정`)
- ❌ 너무 장황한 설명 (코드보다 주석이 긴 경우)
- ❌ 추상적인 설명 ("무언가를 테스트함")
- ❌ 비즈니스 맥락 없이 기술적 설명만
- ❌ 일관성 없는 용어 사용

## 최종 규칙

```
모든 테스트 주석은 다음 질문에 답해야 한다:
1. 이 테스트는 무엇을 검증하는가?
2. 왜 이 검증이 필요한가?
3. 이 시나리오는 어떤 상황을 나타내는가?
```

예외 없이 이 세 가지를 충족하지 않으면 문서화 미완료.
