# **외부 공유 모듈**✅

## 3.1 모듈 개요

외부 공유 모듈은 내부 파일을 **외부 사용자 또는 내부 사용자에게 계정 기반 파일 접근 권한을 부여**할 수 있도록 지원하는 기능이다.

본 모듈은 파일 접근 제어, 만료 정책, 다운로드 제한 등

**보안 중심의 공유 관리 기능**을 제공하는 것을 목표로 한다.

---

## 3.2 사용자 및 권한 범위

외부 공유 설정 및 관리는 다음 권한 정책을 따른다.

| 기능 | User | Manager | Admin |
| --- | --- | --- | --- |
| 외부 공유 설정 | X | O | O |
| 외부 공유 조회 | X | O | O |
| 외부 공유 수정/회수 | X | O | O |

※ 외부 사용자(Guest)는 공유된 파일 접근만 가능하다.

---

## 3.3 외부 공유 권한 모델

외부 공유 권한은 파일 단위로 관리되며, 다음 속성을 가진다.

- 공유 대상 (외부 사용자 또는 내부 User)
- 만료 기간
- 미리보기 가능 여부
- 다운로드 가능 여부
- 다운로드 횟수 제한
- 권한 상태

### 권한 상태 정의

| 상태 | 설명 |
| --- | --- |
| ACTIVE | 공유 권한이 유효한 상태 |
| EXPIRED | 만료 기간이 경과한 상태 |
| REVOKED | 공유 권한이 회수된 상태 |

---

## 3.4 외부 공유 설정 정책

외부 공유 설정 시 다음 항목을 설정할 수 있다.

- 만료 기간
    - 최대 30일(기본 7일)
- 미리보기 가능 여부
    - 가능 / 불가(기본 불가능)
- 다운로드 횟수 제한
    - 최대 10회(기본 3회)

설정하지 않은 항목은 시스템 기본값을 적용한다.

---

## 3.5 외부 공유 권한 조회

외부 공유 권한은 다음 기준으로 조회할 수 있다.

- 사용자 기준 조회
- 파일 기준 조회
- 권한 상태 기준 조회

조회 결과에서는 각 공유 권한의 유효 여부 및 제한 정보를 확인할 수 있다.

---

## 3.6 외부 공유 권한 수정 및 회수

- 외부 공유 권한은 언제든지 수정할 수 있다.
- 수정된 설정은 즉시 External Access 정책에 반영된다.
- 공유 권한 회수 시, 해당 파일 접근은 즉시 차단된다.

---

## 3.7 파일 상태 변경 시 외부 공유 처리

- 외부 공유 중인 파일이 삭제된 경우, 해당 공유 권한은 즉시 무효화된다.
- 파일이 영구 삭제된 경우, 외부 접근은 차단되며 파일 정보는 노출되지 않는다.

---

## 3.8 예외 및 보안 처리 원칙

- 접근이 불가능한 경우, 동일한 접근 차단 메시지를 제공한다.
- 모든 외부 공유 및 접근 이력은 로그로 기록된다.
- 외부 공유 설정에 따른 접근 허용/차단 결과는 **[파일 관리 정책 – 통합 확정본 v2.0 / 응답 매트릭스]**를 따른다.