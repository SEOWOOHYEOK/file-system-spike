# ============================================
# DMS Project - Docker 컨테이너 환경 변수 예시
# ============================================
# 사용법:
#   1. 이 파일을 .env.docker 로 복사
#   2. 실제 값으로 수정
#   3. docker compose --profile full up -d --build
# ============================================

# ===== 프로세스 모드 설정 =====
# all   - API + Workers + Schedulers 모두 실행
# api   - API만 실행
APP_MODE=all

# ===== 서버 =====
PORT=3100
NODE_ENV=production

# ===== Database (컨테이너 내부 네트워크) =====
# docker-compose 서비스명을 호스트로 사용
DB_HOST=postgres
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=postgres
DB_DATABASE=dms
DB_SYNCHRONIZE=false

# ===== Queue 설정 =====
QUEUE_LOCAL_PATH=/data/queue
QUEUE_POLLING_INTERVAL=3000
QUEUE_TYPE=local

# ===== Redis (--profile redis 또는 full 사용 시) =====
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=

# ===== Cache 설정 =====
CACHE_STORAGE_TYPE=local
CACHE_LOCAL_PATH=/data/cache

# Cache Eviction 설정
CACHE_MAX_SIZE_BYTES=53687091200
CACHE_THRESHOLD_PERCENT=80
CACHE_TARGET_PERCENT=70
CACHE_EVICTION_BATCH_SIZE=100

# ===== SeaweedFS (--profile full 사용 시) =====
SEAWEEDFS_MASTER_URL=http://seaweedfs-master:9333
SEAWEEDFS_FILER_URL=http://seaweedfs-filer:8888

# ===== NAS 마운트 경로 (Docker 볼륨으로 매핑) =====
NAS_MOUNT_PATH=/data/nas

# ===== SSO 설정 =====
SSO_BASE_URL=https://lsso-dev.lumir.space
SSO_CLIENT_ID=etstset
SSO_CLIENT_SECRET=setsetse

# ===== JWT / 인증 =====
JWT_EXPIRES_IN=86400
INNER_SECRET=INNER-screct
ACCESS_TOKEN_EXPIRES_IN=86400
REFRESH_TOKEN_EXPIRES_IN=86400
EXTERNAL_REFRESH_TOKEN_EXPIRES_IN=86400
EXTERNAL_JWT_EXPIRES_IN=86400
EXTERNAL_JWT_SECRET=externla-secet

# ===== 외부 사용자 =====
EXTERNAL_DEPARTMENT_ID=45645qwwer12123111111111111111111111111111

# ===== CORS =====
CORS_ORIGIN=http://localhost:5173,http://localhost:3000

# ===== Queue 재시도 =====
QUEUE_DEFAULT_MAX_ATTEMPTS=3
QUEUE_DEFAULT_BACKOFF_MS=5000

# ===== NAS 파일 동기화 =====
NAS_FILE_SYNC_CONCURRENCY=2
NAS_PARALLEL_UPLOAD_THRESHOLD_BYTES=104857600
NAS_PARALLEL_UPLOAD_CHUNK_SIZE=52428800
NAS_PARALLEL_UPLOAD_CHUNKS=4
NAS_PARALLEL_UPLOAD_PROGRESS_INTERVAL=5

# ===== 멀티파트 업로드 설정 =====
MAX_ACTIVE_SESSIONS=3
MAX_SESSIONS_PER_USER=2
MAX_TOTAL_UPLOAD_BYTES=10737418240
MAX_FILE_SIZE_BYTES=21474836480
QUEUE_TICKET_TTL_MS=1800000
QUEUE_READY_CLAIM_MS=300000
MAX_QUEUE_SIZE=50
ESTIMATED_SESSION_DURATION_SECONDS=300

# ===== MOCK LOGIN 구성 =====
NODE_ENV=dev

# 역할	이메일	비밀번호
# GUEST	test-guest@test.local	test1234
# USER	test-user@test.local	test1234
# MANAGER	test-manager@test.local	test1234
# ADMIN	test-admin@test.local	test1234