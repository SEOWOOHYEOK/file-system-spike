/**
 * ============================================================
 * ğŸ“¦ FileShare ë„ë©”ì¸ ì—”í‹°í‹° í…ŒìŠ¤íŠ¸
 * ============================================================
 *
 * ğŸ¯ í…ŒìŠ¤íŠ¸ ëŒ€ìƒ:
 *   - FileShare ë„ë©”ì¸ ì—”í‹°í‹° í´ë˜ìŠ¤
 *
 * ğŸ“‹ ë¹„ì¦ˆë‹ˆìŠ¤ ë§¥ë½:
 *   - 1:1 íŒŒì¼ ê³µìœ  ì‹œìŠ¤í…œì˜ í•µì‹¬ Aggregate Root
 *   - íŒŒì¼ ì†Œìœ ì(Owner)ê°€ íŠ¹ì • ìˆ˜ì‹ ì(Recipient)ì—ê²Œ íŒŒì¼ ê³µìœ 
 *   - ë§Œë£Œì¼, ë‹¤ìš´ë¡œë“œ íšŸìˆ˜ ì œí•œ, ê¶Œí•œ(VIEW/DOWNLOAD) ì„¤ì • ê°€ëŠ¥
 *
 * âš ï¸ ì¤‘ìš” ê³ ë ¤ì‚¬í•­:
 *   - ë§Œë£Œì¼ ì§€ë‚˜ë©´ ê³µìœ  ë¬´íš¨
 *   - ë‹¤ìš´ë¡œë“œ íšŸìˆ˜ ì´ˆê³¼í•˜ë©´ ê³µìœ  ë¬´íš¨
 *   - ê¶Œí•œì— ë”°ë¼ VIEWë§Œ ë˜ëŠ” DOWNLOAD ê°€ëŠ¥
 * ============================================================
 */
import { FileShare } from './file-share.entity';
import { SharePermission } from '../share-permission.enum';

describe('FileShare Entity', () => {
  /**
   * ğŸ“Œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤: FileShare ì—”í‹°í‹° ìƒì„±
   *
   * ğŸ¯ ê²€ì¦ ëª©ì :
   *   FileShare ì—”í‹°í‹°ê°€ ì˜¬ë°”ë¥¸ ì†ì„±ìœ¼ë¡œ ìƒì„±ë˜ëŠ”ì§€ í™•ì¸
   *
   * âœ… ê¸°ëŒ€ ê²°ê³¼:
   *   ëª¨ë“  ì†ì„±ì´ ì „ë‹¬ëœ ê°’ìœ¼ë¡œ ì´ˆê¸°í™”ë¨
   */
  it('should create a FileShare with all properties', () => {
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ“¥ GIVEN (ì‚¬ì „ ì¡°ê±´ ì„¤ì •)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const props = {
      id: 'share-123',
      fileId: 'file-456',
      ownerId: 'user-owner',
      recipientId: 'user-recipient',
      permissions: [SharePermission.VIEW, SharePermission.DOWNLOAD],
      maxDownloadCount: 5,
      currentDownloadCount: 0,
      expiresAt: new Date('2026-02-01'),
      createdAt: new Date('2026-01-01'),
      updatedAt: new Date('2026-01-01'),
    };

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ¬ WHEN (í…ŒìŠ¤íŠ¸ ì‹¤í–‰)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const share = new FileShare(props);

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // âœ… THEN (ê²°ê³¼ ê²€ì¦)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    expect(share.id).toBe('share-123');
    expect(share.fileId).toBe('file-456');
    expect(share.ownerId).toBe('user-owner');
    expect(share.recipientId).toBe('user-recipient');
    expect(share.permissions).toContain(SharePermission.VIEW);
    expect(share.permissions).toContain(SharePermission.DOWNLOAD);
    expect(share.maxDownloadCount).toBe(5);
    expect(share.currentDownloadCount).toBe(0);
  });

  /**
   * ğŸ“Œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤: ê¸°ë³¸ê°’ìœ¼ë¡œ FileShare ìƒì„±
   *
   * ğŸ¯ ê²€ì¦ ëª©ì :
   *   currentDownloadCountì™€ permissionsê°€ ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”
   *
   * âœ… ê¸°ëŒ€ ê²°ê³¼:
   *   currentDownloadCount: 0, permissions: []
   */
  it('should initialize with default values', () => {
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ“¥ GIVEN (ì‚¬ì „ ì¡°ê±´ ì„¤ì •)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const props = {
      id: 'share-123',
      fileId: 'file-456',
      ownerId: 'user-owner',
      recipientId: 'user-recipient',
    };

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ¬ WHEN (í…ŒìŠ¤íŠ¸ ì‹¤í–‰)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const share = new FileShare(props);

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // âœ… THEN (ê²°ê³¼ ê²€ì¦)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    expect(share.currentDownloadCount).toBe(0);
    expect(share.permissions).toEqual([]);
  });

  /**
   * ğŸ“Œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤: ìœ íš¨í•œ ê³µìœ ì¸ì§€ í™•ì¸ (isValid)
   */
  describe('isValid', () => {
    /**
     * ğŸ¯ ê²€ì¦ ëª©ì : ë§Œë£Œì¼ ì „ì´ê³  ë‹¤ìš´ë¡œë“œ ì œí•œ ë¯¸ë‹¬ì´ë©´ ìœ íš¨
     */
    it('should return true when not expired and within download limit', () => {
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ“¥ GIVEN (ì‚¬ì „ ì¡°ê±´ ì„¤ì •)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      const share = new FileShare({
        id: 'share-123',
        fileId: 'file-456',
        ownerId: 'user-owner',
        recipientId: 'user-recipient',
        maxDownloadCount: 5,
        currentDownloadCount: 2,
        expiresAt: new Date(Date.now() + 86400000), // ë‚´ì¼
      });

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ¬ WHEN & THEN (ì‹¤í–‰ ë° ê²€ì¦)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      expect(share.isValid()).toBe(true);
    });

    /**
     * ğŸ¯ ê²€ì¦ ëª©ì : ë§Œë£Œì¼ì´ ì§€ë‚¬ìœ¼ë©´ ë¬´íš¨
     */
    it('should return false when expired', () => {
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ“¥ GIVEN (ì‚¬ì „ ì¡°ê±´ ì„¤ì •)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      const share = new FileShare({
        id: 'share-123',
        fileId: 'file-456',
        ownerId: 'user-owner',
        recipientId: 'user-recipient',
        expiresAt: new Date('2020-01-01'), // ê³¼ê±°
      });

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ¬ WHEN & THEN (ì‹¤í–‰ ë° ê²€ì¦)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      expect(share.isValid()).toBe(false);
    });

    /**
     * ğŸ¯ ê²€ì¦ ëª©ì : ë‹¤ìš´ë¡œë“œ íšŸìˆ˜ ì´ˆê³¼í•˜ë©´ ë¬´íš¨
     */
    it('should return false when download limit exceeded', () => {
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ“¥ GIVEN (ì‚¬ì „ ì¡°ê±´ ì„¤ì •)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      const share = new FileShare({
        id: 'share-123',
        fileId: 'file-456',
        ownerId: 'user-owner',
        recipientId: 'user-recipient',
        maxDownloadCount: 5,
        currentDownloadCount: 5, // ì œí•œ ë„ë‹¬
      });

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ¬ WHEN & THEN (ì‹¤í–‰ ë° ê²€ì¦)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      expect(share.isValid()).toBe(false);
    });

    /**
     * ğŸ¯ ê²€ì¦ ëª©ì : ë§Œë£Œì¼/ë‹¤ìš´ë¡œë“œ ì œí•œ ì—†ìœ¼ë©´ í•­ìƒ ìœ íš¨
     */
    it('should return true when no expiry and no download limit', () => {
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ“¥ GIVEN (ì‚¬ì „ ì¡°ê±´ ì„¤ì •)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      const share = new FileShare({
        id: 'share-123',
        fileId: 'file-456',
        ownerId: 'user-owner',
        recipientId: 'user-recipient',
        // expiresAt ì—†ìŒ, maxDownloadCount ì—†ìŒ
      });

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ¬ WHEN & THEN (ì‹¤í–‰ ë° ê²€ì¦)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      expect(share.isValid()).toBe(true);
    });
  });

  /**
   * ğŸ“Œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤: ë‹¤ìš´ë¡œë“œ íšŸìˆ˜ ì¦ê°€
   */
  describe('incrementDownloadCount', () => {
    /**
     * ğŸ¯ ê²€ì¦ ëª©ì : ë‹¤ìš´ë¡œë“œ íšŸìˆ˜ ì •ìƒ ì¦ê°€
     */
    it('should increment download count', () => {
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ“¥ GIVEN (ì‚¬ì „ ì¡°ê±´ ì„¤ì •)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      const share = new FileShare({
        id: 'share-123',
        fileId: 'file-456',
        ownerId: 'user-owner',
        recipientId: 'user-recipient',
        maxDownloadCount: 5,
        currentDownloadCount: 2,
      });

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ¬ WHEN (í…ŒìŠ¤íŠ¸ ì‹¤í–‰)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      share.incrementDownloadCount();

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // âœ… THEN (ê²°ê³¼ ê²€ì¦)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      expect(share.currentDownloadCount).toBe(3);
    });

    /**
     * ğŸ¯ ê²€ì¦ ëª©ì : ë‹¤ìš´ë¡œë“œ ì œí•œ ë„ë‹¬ ì‹œ ì—ëŸ¬
     */
    it('should throw error when download limit exceeded', () => {
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ“¥ GIVEN (ì‚¬ì „ ì¡°ê±´ ì„¤ì •)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      const share = new FileShare({
        id: 'share-123',
        fileId: 'file-456',
        ownerId: 'user-owner',
        recipientId: 'user-recipient',
        maxDownloadCount: 5,
        currentDownloadCount: 5, // ì´ë¯¸ ì œí•œ ë„ë‹¬
      });

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ¬ WHEN & THEN (ì‹¤í–‰ ë° ê²€ì¦)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      expect(() => share.incrementDownloadCount()).toThrow('Download limit exceeded');
    });

    /**
     * ğŸ¯ ê²€ì¦ ëª©ì : ë‹¤ìš´ë¡œë“œ ì œí•œ ì—†ìœ¼ë©´ í•­ìƒ ì¦ê°€ ê°€ëŠ¥
     */
    it('should increment without limit when maxDownloadCount is undefined', () => {
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ“¥ GIVEN (ì‚¬ì „ ì¡°ê±´ ì„¤ì •)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      const share = new FileShare({
        id: 'share-123',
        fileId: 'file-456',
        ownerId: 'user-owner',
        recipientId: 'user-recipient',
        currentDownloadCount: 100,
        // maxDownloadCount ì—†ìŒ
      });

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ¬ WHEN (í…ŒìŠ¤íŠ¸ ì‹¤í–‰)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      share.incrementDownloadCount();

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // âœ… THEN (ê²°ê³¼ ê²€ì¦)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      expect(share.currentDownloadCount).toBe(101);
    });
  });

  /**
   * ğŸ“Œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤: ê¶Œí•œ í™•ì¸ (hasPermission)
   */
  describe('hasPermission', () => {
    /**
     * ğŸ¯ ê²€ì¦ ëª©ì : ë³´ìœ í•œ ê¶Œí•œì´ë©´ true
     */
    it('should return true when permission exists', () => {
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ“¥ GIVEN (ì‚¬ì „ ì¡°ê±´ ì„¤ì •)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      const share = new FileShare({
        id: 'share-123',
        fileId: 'file-456',
        ownerId: 'user-owner',
        recipientId: 'user-recipient',
        permissions: [SharePermission.VIEW, SharePermission.DOWNLOAD],
      });

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ¬ WHEN & THEN (ì‹¤í–‰ ë° ê²€ì¦)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      expect(share.hasPermission(SharePermission.VIEW)).toBe(true);
      expect(share.hasPermission(SharePermission.DOWNLOAD)).toBe(true);
    });

    /**
     * ğŸ¯ ê²€ì¦ ëª©ì : ì—†ëŠ” ê¶Œí•œì´ë©´ false
     */
    it('should return false when permission does not exist', () => {
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ“¥ GIVEN (ì‚¬ì „ ì¡°ê±´ ì„¤ì •)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      const share = new FileShare({
        id: 'share-123',
        fileId: 'file-456',
        ownerId: 'user-owner',
        recipientId: 'user-recipient',
        permissions: [SharePermission.VIEW], // DOWNLOAD ì—†ìŒ
      });

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // ğŸ¬ WHEN & THEN (ì‹¤í–‰ ë° ê²€ì¦)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      expect(share.hasPermission(SharePermission.DOWNLOAD)).toBe(false);
    });
  });
});
