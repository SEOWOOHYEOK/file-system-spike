# 060-1. íœ´ì§€í†µ ì²˜ë¦¬ FLOW

íœ´ì§€í†µ ê´€ë ¨ APIì˜ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

---

## ì •ì±…

> **âš ï¸ í•µì‹¬ ì •ì±…**
> 
> | í•­ëª© | ì •ì±… |
> |------|------|
> | **íœ´ì§€í†µ ëŒ€ìƒ** | **íŒŒì¼ë§Œ** íœ´ì§€í†µ ì´ë™ ê°€ëŠ¥ (í´ë”ëŠ” íœ´ì§€í†µ ì´ë™ ë¶ˆê°€) |
> | **í´ë” ì‚­ì œ** | ë¹ˆ í´ë”ë§Œ ì¦‰ì‹œ ì˜êµ¬ì‚­ì œ (í•˜ìœ„ íŒŒì¼/í´ë” ìˆìœ¼ë©´ ì‚­ì œ ë¶ˆê°€) |
> | **íœ´ì§€í†µ ë°©ì‹** | ìœˆë„ìš° íœ´ì§€í†µ ìŠ¤íƒ€ì¼ - í”Œë« ë¦¬ìŠ¤íŠ¸, ì›ë˜ ìœ„ì¹˜ë¡œ ë³µì› |
> | **ìë™ ì‚­ì œ** | íœ´ì§€í†µ ì´ë™ í›„ 30ì¼ ê²½ê³¼ ì‹œ ìë™ ì˜êµ¬ì‚­ì œ |
>
> **ğŸ“ ë³µêµ¬ ì •ì±… (2ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤)**
> 
> | ë‹¨ê³„ | ì„¤ëª… |
> |------|------|
> | **1ë‹¨ê³„ (Preview)** | `POST /trash/restore/preview` - ì„ íƒ íŒŒì¼ë“¤ì˜ ê²½ë¡œ ìƒíƒœ í™•ì¸ |
> | **2ë‹¨ê³„ (Execute)** | `POST /trash/restore/execute` - ê²½ë¡œ ì„¸íŒ… ì™„ë£Œ í›„ ì‹¤ì œ ë³µêµ¬ ì‹¤í–‰ |
>
> | ìƒí™© | ì²˜ë¦¬ |
> |------|------|
> | **ê²½ë¡œ íŒë‹¨ ê¸°ì¤€** | **ê²½ë¡œëª… ê¸°ì¤€** (í´ë” IDê°€ ì•„ë‹˜) - ë™ì¼ ê²½ë¡œëª…ì˜ í´ë”ê°€ ìˆìœ¼ë©´ ë³µêµ¬ ê°€ëŠ¥ |
> | **ì¶©ëŒ ì •ì˜** | íŒŒì¼ì´ë¦„ + mimeType + ìƒì„±ì‹œê°„ì´ **ëª¨ë‘ ë™ì¼**í•œ ê²½ìš°ë§Œ ì¶©ëŒ |
> | **ì¶©ëŒ ë°œìƒ ì‹œ** | ê´€ë¦¬ì ì•Œë¦¼, ë³µêµ¬ì—ì„œ ì œì™¸ (ìë™ ë³µêµ¬ ë¶ˆê°€) |
> | **ì›ë˜ ê²½ë¡œ ìˆìŒ** | ì›ë˜ ê²½ë¡œë¡œ ìë™ ë³µêµ¬ (ë˜ëŠ” ì‚¬ìš©ì ì§€ì • ê²½ë¡œ) |
> | **ì›ë˜ ê²½ë¡œ ì—†ìŒ** | ì‚¬ìš©ìê°€ ë³µêµ¬ ê²½ë¡œ ì§€ì • í•„ìˆ˜ (ë¯¸ì§€ì • ì‹œ ë³µêµ¬ ë¶ˆê°€) |
>
> **ê²½ë¡œëª… ê¸°ì¤€ ë³µêµ¬ ì˜ˆì‹œ:**
> ```
> â‘  íŒŒì¼ ì‚­ì œ: /project/folder(ID:3)/file.txt â†’ íœ´ì§€í†µ
> â‘¡ í´ë” ì‚­ì œ: /project/folder(ID:3)/ ì‚­ì œ
> â‘¢ ìƒˆ í´ë” ìƒì„±: /project/folder(ID:4)/ (ê°™ì€ ê²½ë¡œëª…)
> â‘£ ë³µêµ¬ ì‹œ: ê²½ë¡œëª… "/project/folder/"ê°€ ì¡´ì¬ â†’ AVAILABLE (ID:4ë¡œ ìë™ ë³µêµ¬)
> ```

---

## 1. íœ´ì§€í†µ ì¡°íšŒ

### 1-1. GET /trash - íœ´ì§€í†µ ëª©ë¡ ì¡°íšŒ (í•„í„° ì§€ì›)

```mermaid
sequenceDiagram
    participant User as User
    participant API as API Server
    participant DB as FileMetaDataServer

    User->>API: GET /trash (filters, sortBy, order, page, limit)
    
    API->>API: 1. validate & parse query params
    
    API->>DB: 2. query trash files with filters
    Note over DB: SELECT files JOIN trash_metadata<br/>WHERE files.state = 'TRASHED'<br/>AND (filters applied)<br/>ORDER BY {sortBy} {order}<br/>LIMIT {limit} OFFSET {offset}
    DB-->>API: trash files list
    
    loop for each trash file
        API->>DB: 3. check restore path by pathname
        Note over DB: SELECT id FROM folders<br/>WHERE fullPath = originalPath<br/>AND state = 'ACTIVE'
        DB-->>API: resolveFolderId or null
    end
    
    API->>DB: 4. count total matching items
    DB-->>API: totalCount
    
    API->>DB: 5. calculate total size (filtered)
    DB-->>API: totalSizeBytes
    
    API-->>User: 200 OK (items[] with restoreInfo, totalCount, totalSizeBytes, pagination)
```

**ìš”ì²­ Query Parameters:**
```typescript
interface TrashListQuery {
  // === í˜ì´ì§€ë„¤ì´ì…˜ ===
  page?: number;              // í˜ì´ì§€ ë²ˆí˜¸ (default: 1)
  limit?: number;             // í˜ì´ì§€ ë‹¹ í•­ëª© ìˆ˜ (default: 20, max: 100)
  
  // === ì •ë ¬ ===
  sortBy?: 'name' | 'sizeBytes' | 'mimeType' | 'deletedAt' | 'expiresAt' | 'deletedBy';  // default: deletedAt
  order?: 'asc' | 'desc';     // default: desc
  
  // === ê²€ìƒ‰ ===
  search?: string;            // íŒŒì¼ëª… ê²€ìƒ‰ (ë¶€ë¶„ ì¼ì¹˜, ëŒ€ì†Œë¬¸ì ë¬´ì‹œ)
  
  // === í•„í„° ===
  mimeType?: string;          // MIME íƒ€ì… í•„í„° (ì˜ˆ: 'image/*', 'application/pdf')
  mimeCategory?: 'image' | 'video' | 'audio' | 'document' | 'archive' | 'other';  // MIME ì¹´í…Œê³ ë¦¬
  
  deletedBy?: string;         // ì‚­ì œì ID
  
  deletedAfter?: string;      // ì‚­ì œì¼ ì‹œì‘ (ISO 8601, ì˜ˆ: '2026-01-01')
  deletedBefore?: string;     // ì‚­ì œì¼ ì¢…ë£Œ (ISO 8601)
  
  expiresAfter?: string;      // ë§Œë£Œì¼ ì‹œì‘ (ISO 8601)
  expiresBefore?: string;     // ë§Œë£Œì¼ ì¢…ë£Œ (ISO 8601)
  
  minSize?: number;           // ìµœì†Œ íŒŒì¼ í¬ê¸° (bytes)
  maxSize?: number;           // ìµœëŒ€ íŒŒì¼ í¬ê¸° (bytes)
  
  originalFolderId?: string;  // ì›ë˜ í´ë” ID (íŠ¹ì • í´ë”ì—ì„œ ì‚­ì œëœ íŒŒì¼ë§Œ)
}
```

**ì‘ë‹µ êµ¬ì¡°:**
```typescript
interface TrashListResponse {
  items: TrashItem[];
  totalCount: number;
  totalSizeBytes: number;
  
  // í˜ì´ì§€ë„¤ì´ì…˜ ì •ë³´
  pagination: {
    page: number;
    limit: number;
    totalPages: number;
    hasNext: boolean;
    hasPrev: boolean;
  };
  
  // ì ìš©ëœ í•„í„° ìš”ì•½
  appliedFilters: {
    search?: string;
    mimeType?: string;
    mimeCategory?: string;
    deletedBy?: string;
    dateRange?: { from?: string; to?: string };
    sizeRange?: { min?: number; max?: number };
  };
}

interface TrashItem {
  type: 'FILE';
  id: string;                  // íŒŒì¼ ID
  name: string;                // íŒŒì¼ëª…
  sizeBytes: number;           // íŒŒì¼ í¬ê¸°
  mimeType: string;            // MIME íƒ€ì…
  extension: string;           // í™•ì¥ì (ì˜ˆ: 'pdf', 'jpg')
  
  trashMetadataId: string;     // íœ´ì§€í†µ ë©”íƒ€ ID
  originalPath: string;        // ì›ë˜ ê²½ë¡œ (í´ë” ê²½ë¡œ)
  originalFolderId: string;    // ì›ë˜ í´ë” ID (ì‚­ì œ ì‹œì ì˜ í´ë” ID)
  originalFolderName: string;  // ì›ë˜ í´ë”ëª…
  
  deletedAt: Date;             // ì‚­ì œì¼ì‹œ
  deletedBy: string;           // ì‚­ì œì ID
  deletedByName: string;       // ì‚­ì œì ì´ë¦„
  expiresAt: Date;             // ìë™ ì˜êµ¬ì‚­ì œ ì˜ˆì •ì¼
  daysUntilExpiry: number;     // ë§Œë£Œê¹Œì§€ ë‚¨ì€ ì¼ìˆ˜
  
  createdAt: Date;             // íŒŒì¼ ìƒì„±ì¼ (ì¶©ëŒ íŒë‹¨ìš©)
  
  // â˜… ë³µêµ¬ ê²½ë¡œ ìƒíƒœ (ê²½ë¡œëª… ê¸°ì¤€)
  restoreInfo: {
    pathStatus: 'AVAILABLE' | 'NOT_FOUND';  //AVAILABLE: ë³µêµ¬ê°€ëŠ¥,NOT_FOUND : ë³µêµ¬ ë¶ˆê°€  ë³µêµ¬ ê²½ë¡œ ìƒíƒœ
    resolveFolderId: string | null;         // ê²½ë¡œëª…ìœ¼ë¡œ ì°¾ì€ í˜„ì¬ í´ë” ID (ìˆìœ¼ë©´)
  };
}
```

---

### 1-2. MIME ì¹´í…Œê³ ë¦¬ ì •ì˜

| mimeCategory | í¬í•¨ MIME íƒ€ì… |
|--------------|---------------|
| `image` | image/* (jpeg, png, gif, webp, svg...) |
| `video` | video/* (mp4, avi, mov, mkv...) |
| `audio` | audio/* (mp3, wav, flac, ogg...) |
| `document` | application/pdf, application/msword, text/*, application/vnd.ms-*, application/vnd.openxmlformats-* |
| `archive` | application/zip, application/x-rar, application/x-7z-compressed, application/gzip |
| `other` | ìœ„ ì¹´í…Œê³ ë¦¬ì— í•´ë‹¹í•˜ì§€ ì•ŠëŠ” ëª¨ë“  íƒ€ì… |

---

### 1-3. í•„í„° ì¡°í•© ì˜ˆì‹œ

**ì˜ˆì‹œ 1: ìµœê·¼ 7ì¼ê°„ ì‚­ì œëœ ì´ë¯¸ì§€ íŒŒì¼**
```
GET /trash?mimeCategory=image&deletedAfter=2026-01-15&sortBy=deletedAt&order=desc
```

**ì˜ˆì‹œ 2: íŠ¹ì • ì‚¬ìš©ìê°€ ì‚­ì œí•œ í° íŒŒì¼ (10MB ì´ìƒ)**
```
GET /trash?deletedBy=user123&minSize=10485760&sortBy=sizeBytes&order=desc
```

**ì˜ˆì‹œ 3: íŒŒì¼ëª… ê²€ìƒ‰ + PDF ë¬¸ì„œë§Œ**
```
GET /trash?search=ë³´ê³ ì„œ&mimeType=application/pdf
```

**ì˜ˆì‹œ 4: ê³§ ë§Œë£Œë˜ëŠ” íŒŒì¼ (7ì¼ ì´ë‚´)**
```
GET /trash?expiresBefore=2026-01-29&sortBy=expiresAt&order=asc
```

**ì˜ˆì‹œ 5: íŠ¹ì • í´ë”ì—ì„œ ì‚­ì œëœ íŒŒì¼**
```
GET /trash?originalFolderId=folder-uuid-123
```


## 2. íŒŒì¼ íœ´ì§€í†µ ì´ë™

> **âš ï¸ trash_metadata ìƒì„± ê·œì¹™**
> 
> | ê·œì¹™ | ì„¤ëª… |
> |------|------|
> | **íŒŒì¼ 1ê°œ = trash_metadata 1ê°œ** | íŒŒì¼ ì‚­ì œ ì‹œ í•´ë‹¹ íŒŒì¼ì— ëŒ€í•œ trash_metadataê°€ **ê°œë³„ ìƒì„±** |
> | **íŒŒì¼:trash_metadata = 1:1** | í•˜ë‚˜ì˜ íŒŒì¼ì€ í•˜ë‚˜ì˜ trash_metadataë§Œ ê°€ì§ |
> | **íœ´ì§€í†µ ID ê¸°ì¤€ NAS ê²½ë¡œ** | `/.trash/{trashMetadataId}/...` í˜•ì‹ìœ¼ë¡œ NASì— ì €ì¥ |

### 2-1. DELETE /files/{fileId} - íŒŒì¼ íœ´ì§€í†µ ì´ë™

> **ì°¸ì¡°:** ìƒì„¸ FLOWëŠ” [005-1.íŒŒì¼_ì²˜ë¦¬_FLOW.md](../íŒŒì¼/005-1.íŒŒì¼_ì²˜ë¦¬_FLOW.md) 4-1ì ˆ ì°¸ì¡°

```mermaid
sequenceDiagram
    participant User as User
    participant API as API Server
    participant DB as FileMetaDataServer
    participant Bull as Bull Queue
    participant Worker as Bull Worker
    participant NAS as NAS

    User->>API: DELETE /files/{fileId}
    
    Note over API,DB: ìƒíƒœ ê²€ì¦ + ë½ íšë“
    API->>DB: 1. BEGIN TRANSACTION
    API->>DB: 2. SELECT file FOR UPDATE
    DB-->>API: file info (id, name, folderId, path)
    
    alt file not found
        API->>DB: ROLLBACK
        API-->>User: 404 FILE_NOT_FOUND
    else already TRASHED
        API->>DB: ROLLBACK
        API-->>User: 400 FILE_ALREADY_TRASHED
    end
    
    API->>DB: 3. check NAS availability_status
    DB-->>API: availabilityStatus, active_sync_event_id
    
    alt BUSY (active_sync_event_id NOT NULL)
        API->>DB: ROLLBACK
        API-->>User: 409 FILE_BUSY
    end
    
    API->>DB: 4. check lease_count
    DB-->>API: lease_count
    
    alt lease_count > 0
        API->>DB: ROLLBACK
        API-->>User: 409 FILE_IN_USE
        Note over User: "íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œ ì¤‘ì…ë‹ˆë‹¤."
    end
    
    API->>DB: 5. UPDATE files SET state='TRASHED'
    
    Note over API,DB: â˜… íŒŒì¼ë³„ trash_metadata ìƒì„± (1:1)
    API->>DB: 6. INSERT trash_metadata RETURNING id
    Note over DB: INSERT INTO trash_metadata (<br/>  fileId = {fileId},     -- í•´ë‹¹ íŒŒì¼ ID<br/>  originalPath,          -- ì‚­ì œ ì‹œì  ê²½ë¡œ<br/>  originalFolderId,      -- ì›ë˜ í´ë” ID<br/>  deletedAt = NOW(),<br/>  deletedBy = {userId},<br/>  expiresAt = NOW() + 30days<br/>) RETURNING id as trashMetadataId
    DB-->>API: trashMetadataId (ì‹ ê·œ ìƒì„±ëœ ID)
    
    API->>DB: 7. INSERT sync_events (TRASH, PENDING, metadata:{originalPath, trashMetadataId})
    API->>DB: 8. UPDATE file_storage_objects (BUSY, active_sync_event_id)
    API->>Bull: 9. add job (syncEventId)
    API->>DB: COMMIT
    
    API-->>User: 200 OK (id, name, state=TRASHED, trashMetadataId, syncEventId)
    
    Note over Bull,NAS: [Async] Bull Worker
    Bull->>Worker: job (syncEventId)
    Worker->>DB: get sync_event details + trashMetadataId
    Worker->>DB: UPDATE sync_events (status=PROCESSING)
    
    Worker->>DB: check lease_count again
    alt lease_count > 0
        Worker-->>Bull: retry after 5s
    end
    
    Note over Worker,NAS: trashMetadataId ê¸°ì¤€ìœ¼ë¡œ NAS íœ´ì§€í†µ ê²½ë¡œ ìƒì„±
    Worker->>NAS: move file to .trash/{trashMetadataId}/originalPath/filename
    Note over Worker,NAS: ì›ë³¸: /documents/project/report.pdf<br/>íœ´ì§€í†µ: /.trash/{trashMetadataId}/documents/project/report.pdf
    
    alt NAS success
        NAS-->>Worker: OK
        Worker->>DB: TRANSACTION BEGIN
        Worker->>DB: UPDATE file_storage_objects SET objectKey='/.trash/{trashMetadataId}/...'
        Worker->>DB: UPDATE file_storage_objects (AVAILABLE, active_sync_event_id=NULL)
        Worker->>DB: UPDATE sync_events (DONE, processed_at)
        Worker->>DB: COMMIT
    else NAS fail (retryable)
        Worker->>DB: UPDATE sync_events (retry_count++, error_message)
        Worker-->>Bull: retry with backoff
    else NAS fail (max retries)
        Worker->>DB: UPDATE sync_events (FAILED)
        Worker->>DB: UPDATE file_storage_objects (ERROR)
        Worker->>Alert: send admin alert (syncEventId, TRASH_FAILED)
    end
```

**trash_metadata í…Œì´ë¸” êµ¬ì¡°:**
```typescript
interface TrashMetadata {
  id: string;                // PK, UUID (trashMetadataId)
  fileId: string;            // FK â†’ files.id (1:1 ê´€ê³„)
  
  originalPath: string;      // ì‚­ì œ ì‹œì ì˜ íŒŒì¼ ê²½ë¡œ (ë³µêµ¬ìš©)
  originalFolderId: string;  // ì‚­ì œ ì‹œì ì˜ í´ë” ID (ë³µêµ¬ìš©)
  
  deletedAt: Date;           // ì‚­ì œ ì¼ì‹œ
  deletedBy: string;         // ì‚­ì œì ID
  expiresAt: Date;           // ìë™ ì˜êµ¬ì‚­ì œ ì˜ˆì •ì¼ (deletedAt + 30ì¼)
}
```

**ê´€ê³„ë„:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   files     â”‚   1:1   â”‚  trash_metadata  â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)     â”‚         â”‚ id (PK)          â”‚
â”‚ name        â”‚         â”‚ fileId (FK, UQ)  â”‚  â† UNIQUE ì œì•½
â”‚ state       â”‚         â”‚ originalPath     â”‚
â”‚ folderId    â”‚         â”‚ originalFolderId â”‚
â”‚ ...         â”‚         â”‚ deletedAt        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ deletedBy        â”‚
                        â”‚ expiresAt        â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€» fileIdì— UNIQUE ì œì•½ â†’ íŒŒì¼ë‹¹ trash_metadata 1ê°œë§Œ ì¡´ì¬
â€» íŒŒì¼ ì˜êµ¬ì‚­ì œ ì‹œ trash_metadataë„ í•¨ê»˜ ì‚­ì œ (CASCADE)
```

## 4. íŒŒì¼ ì˜êµ¬ ì‚­ì œ

### 4-1. DELETE /trash/files/{trashMetadataId} - íŒŒì¼ ì˜êµ¬ ì‚­ì œ

```mermaid
sequenceDiagram
    participant User as User
    participant API as API Server
    participant Cache as FileCashServer
    participant DB as FileMetaDataServer
    participant Bull as Bull Queue
    participant Worker as Bull Worker
    participant NAS as NAS

    User->>API: DELETE /trash/files/{trashMetadataId}
    
    API->>DB: 1. get trash_metadata + file info
    DB-->>API: file info, trashPath
    
    alt trash_metadata not found
        API-->>User: 404 TRASH_ITEM_NOT_FOUND
    end
    
    alt file.state != TRASHED
        API-->>User: 400 FILE_NOT_IN_TRASH
    end
    
    API->>DB: 2. check NAS availability_status
    DB-->>API: availabilityStatus, active_sync_event_id
    
    alt BUSY (active_sync_event_id NOT NULL)
        API-->>User: 409 FILE_BUSY
        Note over User: "ë™ê¸°í™”(íœ´ì§€í†µ ì´ë™) ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤."
    end
    
    Note over API,DB: DB ë¨¼ì € ì»¤ë°‹ (ì˜ì‚¬ íŠ¸ëœì­ì…˜)
    API->>DB: 3. BEGIN TRANSACTION
    API->>DB: UPDATE files SET state='DELETED'
    API->>DB: DELETE trash_metadata
    API->>DB: UPDATE file_storage_objects(CACHE) SET availabilityStatus='PENDING'
    API->>DB: INSERT sync_events (PURGE, PENDING, metadata:{trashPath})
    API->>DB: COMMIT
    
    Note over API,Cache: SeaweedFS ì‚­ì œ ì‹œë„ (ë™ê¸°)
    API->>Cache: 4. delete file (objectKey=fileId)
    
    alt Cache delete success
        Cache-->>API: OK
        API->>DB: DELETE file_storage_objects WHERE storageType='CACHE'
    else Cache delete fail
        Cache-->>API: Error
        Note over API: DB ë¡¤ë°±í•˜ì§€ ì•ŠìŒ<br/>ë°°ì¹˜ ì •ë¦¬ Workerê°€ ì²˜ë¦¬
    end
    
    API->>Bull: 5. add job (syncEventId)
    
    API-->>User: 200 OK (state=DELETED)
    
    Note over Bull,NAS: [Async] Bull Worker
    Bull->>Worker: job (syncEventId)
    Worker->>DB: get sync_event details (trashPath)
    Worker->>DB: UPDATE sync_events (status=PROCESSING)
    
    Worker->>NAS: delete file (trashPath)
    Note over Worker,NAS: /.trash/{trashMetadataId}/path/to/file.txt ì‚­ì œ
    
    alt NAS success
        NAS-->>Worker: OK
        Worker->>DB: TRANSACTION BEGIN
        Worker->>DB: DELETE file_storage_objects WHERE storageType='NAS'
        Worker->>DB: UPDATE sync_events (DONE, processed_at)
        Worker->>DB: COMMIT
    else NAS fail (retryable)
        Worker->>DB: UPDATE sync_events (retry_count++, error_message)
        Worker-->>Bull: retry with backoff
    else NAS fail (max retries)
        Worker->>DB: TRANSACTION BEGIN
        Worker->>DB: UPDATE sync_events (FAILED)
        Worker->>DB: UPDATE file_storage_objects(NAS) SET availabilityStatus='ERROR'
        Worker->>DB: COMMIT
        Worker->>Alert: send admin alert (syncEventId, PURGE_FAILED)
    end
```

---

## 5. ì¼ê´„ ì²˜ë¦¬

### 5-1. DELETE /trash/all - íœ´ì§€í†µ ë¹„ìš°ê¸°

```mermaid
sequenceDiagram
    participant User as User
    participant API as API Server
    participant DB as FileMetaDataServer
    participant Bull as Bull Queue

    User->>API: DELETE /trash/all
    
    API->>DB: 1. get all trash_metadata (files only)
    DB-->>API: trash files list
    
    alt no items
        API-->>User: 200 OK (success: 0, failed: 0)
    end
    
    Note over API,DB: ì²­í¬ ë‹¨ìœ„ ì²˜ë¦¬ (100ê°œì”©)
    
    loop for each chunk (100 items)
        loop for each file in chunk
            API->>API: call deleteFileFromTrash(trashMetadataId)
            Note over API: ê°œë³„ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì²˜ë¦¬<br/>ì¼ë¶€ ì‹¤íŒ¨í•´ë„ ë‚˜ë¨¸ì§€ ì§„í–‰
        end
    end
    
    API-->>User: 200 OK (success: N, failed: M)
```

**ì‘ë‹µ êµ¬ì¡°:**
```typescript
interface EmptyTrashResponse {
  message: string;
  success: number;
  failed: number;
}
```

---

### 5-2. ë³µêµ¬ í”„ë¡œì„¸ìŠ¤ (2ë‹¨ê³„)

> **âš ï¸ ë³µêµ¬ ê²½ë¡œê°€ ì—†ëŠ” íŒŒì¼ ì²˜ë¦¬ ì •ì±…**
>
> | ìƒí™© | ì²˜ë¦¬ |
> |------|------|
> | ë³µêµ¬ ê²½ë¡œ ìˆìŒ | ì›ë˜ ê²½ë¡œë¡œ ë³µêµ¬ (ë˜ëŠ” ì‚¬ìš©ì ì§€ì • ê²½ë¡œ) |
> | ë³µêµ¬ ê²½ë¡œ ì—†ìŒ | ì‚¬ìš©ìê°€ ë³µêµ¬ ê²½ë¡œ ì§€ì • í•„ìˆ˜ (ë¯¸ì§€ì • ì‹œ ë³µêµ¬ ë¶ˆê°€) |
> | ëª¨ë“  íŒŒì¼ ì„¸íŒ… ì™„ë£Œ | ë³µêµ¬ ì‹¤í–‰ ê°€ëŠ¥ |

**ì „ì²´ í”Œë¡œìš°:**

```mermaid
flowchart TD
    subgraph step1 [1ë‹¨ê³„: ë³µêµ¬ ëŒ€ìƒ ê²½ë¡œ í™•ì¸]
        A[ì‚¬ìš©ì: íœ´ì§€í†µì—ì„œ íŒŒì¼ ì„ íƒ] --> B["POST /trash/restore/preview"]
        B --> C{ê²½ë¡œ ìƒíƒœ í™•ì¸}
        C --> D[ì‘ë‹µ: íŒŒì¼ë³„ ê²½ë¡œ ìƒíƒœ ë°˜í™˜]
    end
    
    subgraph step2 [2ë‹¨ê³„: ê²½ë¡œ ì„¸íŒ… - Frontend]
        D --> E{ëª¨ë“  íŒŒì¼ ê²½ë¡œ ìˆìŒ?}
        E -->|Yes| G[ë°”ë¡œ ë³µêµ¬ ê°€ëŠ¥]
        E -->|No| F[UI: ê²½ë¡œ ì—†ëŠ” íŒŒì¼ì— ë³µêµ¬ ê²½ë¡œ ì§€ì • ìš”ì²­]
        F --> H{ì‚¬ìš©ì ê²½ë¡œ ì§€ì •?}
        H -->|ì§€ì •í•¨| I[ë³µêµ¬ ëŒ€ìƒì— í¬í•¨]
        H -->|ì§€ì • ì•ˆí•¨| J[ë³µêµ¬ ëŒ€ìƒì—ì„œ ì œì™¸]
        I --> K[ì„¸íŒ… ì™„ë£Œ]
        J --> K
        G --> K
    end
    
    subgraph step3 [3ë‹¨ê³„: ë³µêµ¬ ì‹¤í–‰]
        K --> L["POST /trash/restore/execute"]
        L --> M[Bull Queue: íŒŒì¼ë³„ job ìƒì„±]
        M --> N[NAS: íŒŒì¼ ì´ë™]
        N --> O[ë³µêµ¬ ì™„ë£Œ]
    end
```

---

#### 5-2-1. POST /trash/restore/preview - ë³µêµ¬ ê²½ë¡œ ìƒíƒœ í™•ì¸

> ì„ íƒí•œ íŒŒì¼ë“¤ì˜ ë³µêµ¬ ê²½ë¡œ ìƒíƒœë¥¼ ë¯¸ë¦¬ í™•ì¸ (â˜… ê²½ë¡œëª… ê¸°ì¤€)

```mermaid
sequenceDiagram
    participant User as User/Frontend
    participant API as API Server
    participant DB as Database

    User->>API: POST /trash/restore/preview
    Note over User: trashMetadataIds: [id1, id2, id3]<br/>ë˜ëŠ” filters: {...}
    
    API->>DB: 1. SELECT trash files info
    Note over DB: SELECT f.*, t.* FROM files f<br/>JOIN trash_metadata t<br/>WHERE t.id IN (ids)<br/>OR (filters applied)
    DB-->>API: files with originalPath
    
    loop for each file
        API->>DB: 2. CHECK folder exists by pathname
        Note over DB: SELECT id FROM folders<br/>WHERE fullPath = originalPath<br/>AND state = 'ACTIVE'
        DB-->>API: resolveFolderId or null
        
        alt resolveFolderId exists
            API->>DB: 3. CHECK conflict in resolved folder
            Note over DB: SELECT id FROM files<br/>WHERE folderId = resolveFolderId<br/>AND name = ? AND mimeType = ?<br/>AND createdAt = ? AND state = 'ACTIVE'
            DB-->>API: has conflict / no conflict
        end
    end
    
    API-->>User: RestorePreviewResponse
    Note over User: items: [<br/>  {id1, pathStatus: AVAILABLE, resolveFolderId: newId},<br/>  {id2, pathStatus: NOT_FOUND, resolveFolderId: null},<br/>  {id3, pathStatus: AVAILABLE, hasConflict: true}<br/>]
```

**ìš”ì²­ êµ¬ì¡°:**
```typescript
interface RestorePreviewRequest {
  // ë°©ë²• 1: íŠ¹ì • íŒŒì¼ ID ëª©ë¡ (ì²´í¬ë°•ìŠ¤ ì„ íƒ)
  trashMetadataIds?: string[];
  
  // ë°©ë²• 2: í•„í„° ì¡°ê±´ (GET /trashì™€ ë™ì¼)
  filters?: {
    search?: string;
    mimeType?: string;
    mimeCategory?: 'image' | 'video' | 'audio' | 'document' | 'archive' | 'other';
    deletedBy?: string;
    deletedAfter?: string;
    deletedBefore?: string;
    expiresAfter?: string;
    expiresBefore?: string;
    minSize?: number;
    maxSize?: number;
    originalFolderId?: string;
  };
}
```

**ì‘ë‹µ êµ¬ì¡°:**
```typescript
interface RestorePreviewResponse {
  totalCount: number;
  
  items: {
    trashMetadataId: string;
    fileId: string;
    fileName: string;
    mimeType: string;
    sizeBytes: number;
    deletedAt: Date;
    
    // ê²½ë¡œ ìƒíƒœ (â˜… ê²½ë¡œëª… ê¸°ì¤€)
    pathStatus: 'AVAILABLE' | 'NOT_FOUND';
    originalPath: string;               // "/projects/2024/reports/" (ì‚­ì œ ì‹œì ì˜ ê²½ë¡œëª…)
    originalFolderId: string;           // ì‚­ì œ ì‹œì ì˜ í´ë” ID (ì°¸ê³ ìš©)
    resolveFolderId: string | null;     // â˜… ê²½ë¡œëª…ìœ¼ë¡œ ì°¾ì€ í˜„ì¬ í´ë” ID (AVAILABLEì´ë©´ ê°’ ìˆìŒ)
    
    // ì¶©ëŒ ì—¬ë¶€
    hasConflict: boolean;               // ë™ì¼ íŒŒì¼ ì¡´ì¬ ì—¬ë¶€
    conflictFileId?: string;            // ì¶©ëŒ íŒŒì¼ ID (hasConflict=trueì¼ ë•Œ)
  }[];
  
  // ìš”ì•½
  summary: {
    available: number;    // ê²½ë¡œ ìˆëŠ” íŒŒì¼ ìˆ˜ (ë³µêµ¬ ê°€ëŠ¥)
    notFound: number;     // ê²½ë¡œ ì—†ëŠ” íŒŒì¼ ìˆ˜ (ê²½ë¡œ ì„ íƒ í•„ìš”)
    conflict: number;     // ì¶©ëŒ íŒŒì¼ ìˆ˜
  };
}
```

**ê²½ë¡œ í™•ì¸ ë¡œì§ (ê²½ë¡œëª… ê¸°ì¤€):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  trash_metadata.originalPath = "/projects/2024/"                â”‚
â”‚  trash_metadata.originalFolderId = "folder-old-123" (ì‚­ì œë¨)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SELECT id FROM folders                                          â”‚
â”‚  WHERE fullPath = "/projects/2024/"                              â”‚
â”‚  AND state = 'ACTIVE'                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ê²°ê³¼ ìˆìŒ         â”‚            â”‚ ê²°ê³¼ ì—†ìŒ         â”‚
    â”‚ (folder-new-456) â”‚            â”‚                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                               â”‚
             â–¼                               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ pathStatus:      â”‚            â”‚ pathStatus:      â”‚
    â”‚   AVAILABLE      â”‚            â”‚   NOT_FOUND      â”‚
    â”‚ resolveFolderId: â”‚            â”‚ resolveFolderId: â”‚
    â”‚   folder-new-456 â”‚            â”‚   null           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "totalCount": 3,
  "items": [
    {
      "trashMetadataId": "trash-001",
      "fileId": "file-111",
      "fileName": "report.pdf",
      "mimeType": "application/pdf",
      "sizeBytes": 1024000,
      "deletedAt": "2026-01-20T10:00:00Z",
      "pathStatus": "AVAILABLE",
      "originalPath": "/projects/2024/",
      "originalFolderId": "folder-old-abc",
      "resolveFolderId": "folder-new-456",
      "hasConflict": false
    },
    {
      "trashMetadataId": "trash-002",
      "fileId": "file-222",
      "fileName": "image.png",
      "mimeType": "image/png",
      "sizeBytes": 512000,
      "deletedAt": "2026-01-19T15:30:00Z",
      "pathStatus": "NOT_FOUND",
      "originalPath": "/archive/old-project/",
      "originalFolderId": "folder-deleted",
      "resolveFolderId": null,
      "hasConflict": false
    },
    {
      "trashMetadataId": "trash-003",
      "fileId": "file-333",
      "fileName": "data.xlsx",
      "mimeType": "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",
      "sizeBytes": 256000,
      "deletedAt": "2026-01-18T09:00:00Z",
      "pathStatus": "AVAILABLE",
      "originalPath": "/documents/",
      "originalFolderId": "folder-xyz",
      "resolveFolderId": "folder-xyz",
      "hasConflict": true,
      "conflictFileId": "file-existing-333"
    }
  ],
  "summary": {
    "available": 2,
    "notFound": 1,
    "conflict": 1
  }
}
```

---

#### 5-2-2. POST /trash/restore/execute - ë³µêµ¬ ì‹¤í–‰

> ê²½ë¡œ ì„¸íŒ… ì™„ë£Œ í›„ ì‹¤ì œ ë³µêµ¬ ì‹¤í–‰ (íŒŒì¼ë³„ ê°œë³„ Bull Queue job ìƒì„±)

```mermaid
sequenceDiagram
    participant User as User/Frontend
    participant API as API Server
    participant DB as Database
    participant Bull as Bull Queue
    participant Worker as Bull Worker
    participant NAS as NAS Storage
    participant Alert as Admin Alert

    User->>API: POST /trash/restore/execute
    Note over User: items: [<br/>  {trashMetadataId: id1},<br/>  {trashMetadataId: id2, targetFolderId: folder-new},<br/>  {trashMetadataId: id3, exclude: true}<br/>]
    
    API->>API: 1. validate request
    
    loop for each item (ì œì™¸ í•­ëª© ì œì™¸)
        API->>DB: 2. verify trash file exists
        DB-->>API: trash file info (with originalPath)
        
        alt exclude = true
            Note over API: skip this item
        else targetFolderId provided
            API->>DB: 3a. verify target folder exists
            alt folder not exists
                API-->>User: 400 INVALID_TARGET_FOLDER
            end
            Note over API: restoreFolderId = targetFolderId
        else targetFolderId not provided
            API->>DB: 3b. find folder by pathname
            Note over DB: SELECT id FROM folders<br/>WHERE fullPath = originalPath<br/>AND state = 'ACTIVE'
            DB-->>API: resolveFolderId or null
            alt resolveFolderId is null
                API-->>User: 400 RESTORE_PATH_REQUIRED
                Note over User: ê²½ë¡œ ì—†ëŠ” íŒŒì¼ì— targetFolderId í•„ìˆ˜
            end
            Note over API: restoreFolderId = resolveFolderId
        end
        
        API->>DB: 4. check conflict in restoreFolderId
        alt hasConflict = true
            API->>Alert: send admin alert
            Note over API: skip - ì¶©ëŒ í•­ëª©
        else no conflict
            Note over API,DB: íŒŒì¼ë³„ ê°œë³„ íŠ¸ëœì­ì…˜
            API->>DB: BEGIN TRANSACTION
            API->>DB: 5. UPDATE files SET state='ACTIVE', folderId=restoreFolderId
            API->>DB: 6. DELETE trash_metadata
            API->>DB: 7. INSERT sync_events (RESTORE, PENDING)
            API->>DB: 8. UPDATE file_storage_objects (BUSY)
            API->>Bull: 9. add job (syncEventId)
            Note over Bull: íŒŒì¼ 1ê°œë‹¹ job 1ê°œ
            API->>DB: COMMIT
        end
    end
    
    API-->>User: 200 OK (queued, excluded, skipped, syncEventIds)
    Note over User: ì¦‰ì‹œ ì‘ë‹µ - ë¹„ë™ê¸° ì²˜ë¦¬
    
    Note over Bull,NAS: Async: Bull Worker íŒŒì¼ë³„ ë³‘ë ¬ ì²˜ë¦¬
    
    par ë³‘ë ¬ ì²˜ë¦¬ ê°€ëŠ¥
        Bull->>Worker: job1 (syncEventId-1)
        Worker->>DB: TRANSACTION BEGIN
        Worker->>NAS: move file1 (trashPath to restorePath)
        Worker->>DB: UPDATE sync_events SET status=DONE
        Worker->>DB: UPDATE file_storage_objects (storageType:NAS, availabilityStatus: AVAILABLE, active_sync_event_id=NULL)
        Worker->>DB: COMMIT
    and
        Bull->>Worker: job2 (syncEventId-2)
        Worker->>DB: TRANSACTION BEGIN
        Worker->>NAS: move file2 (trashPath to restorePath)
        Worker->>DB: UPDATE sync_events SET status=DONE
        Worker->>DB: UPDATE file_storage_objects (storageType:NAS, availabilityStatus: AVAILABLE, active_sync_event_id=NULL)
        Worker->>DB: COMMIT
    end
```


**ìš”ì²­ êµ¬ì¡°:**
```typescript
interface RestoreExecuteRequest {
  items: {
    trashMetadataId: string;
    
    // ë³µêµ¬ ê²½ë¡œ ì§€ì • (ì„ íƒì‚¬í•­)
    // - ë¯¸ì§€ì •: previewì—ì„œ ë°›ì€ resolveFolderIdë¡œ ìë™ ë³µêµ¬ (pathStatus=AVAILABLEì¸ ê²½ìš°)
    // - ì§€ì •: í•´ë‹¹ í´ë”ë¡œ ë³µêµ¬ (pathStatus=NOT_FOUNDì¸ ê²½ìš° í•„ìˆ˜)
    targetFolderId?: string;
    
    // ë³µêµ¬ ì œì™¸ (ì„ íƒì‚¬í•­)
    // - true: ì´ íŒŒì¼ì€ ë³µêµ¬í•˜ì§€ ì•ŠìŒ
    exclude?: boolean;
  }[];
}
```

**ë³µêµ¬ ê²½ë¡œ ê²°ì • ë¡œì§:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  execute ìš”ì²­ ì‹œ ë³µêµ¬ ê²½ë¡œ ê²°ì •                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  if (item.targetFolderId ì§€ì •ë¨) {                              â”‚
â”‚    â†’ targetFolderIdë¡œ ë³µêµ¬                                      â”‚
â”‚  } else if (preview.resolveFolderId ìˆìŒ) {                     â”‚
â”‚    â†’ resolveFolderIdë¡œ ìë™ ë³µêµ¬ (ê²½ë¡œëª… ê¸°ì¤€ ì°¾ì€ í´ë”)          â”‚
â”‚  } else {                                                       â”‚
â”‚    â†’ 400 RESTORE_PATH_REQUIRED ì—ëŸ¬                             â”‚
â”‚  }                                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì‘ë‹µ êµ¬ì¡°:**
```typescript
interface RestoreExecuteResponse {
  message: string;
  
  // ê²°ê³¼ í†µê³„
  queued: number;           // Bull Queueì— ì¶”ê°€ëœ job ìˆ˜
  excluded: number;         // ì‚¬ìš©ìê°€ ì œì™¸í•œ í•­ëª© ìˆ˜
  skipped: number;          // ì¶©ëŒë¡œ skipëœ í•­ëª© ìˆ˜
  
  // ìƒì„±ëœ sync_event ID ëª©ë¡ (ì§„í–‰ ìƒí™© ì¶”ì ìš©)
  syncEventIds: string[];
  
  // ì¶©ëŒë¡œ skipëœ í•­ëª© ìƒì„¸
  skippedItems: {
    trashMetadataId: string;
    fileName: string;
    reason: 'CONFLICT';
    conflictFileId: string;
  }[];
}
```

**ìš”ì²­ ì˜ˆì‹œ:**
```typescript
// ì˜ˆì‹œ: 3ê°œ íŒŒì¼ ì¤‘ 1ê°œ ì œì™¸, 1ê°œ ê²½ë¡œ ì§€ì •
POST /trash/restore/execute
{
  "items": [
    { 
      "trashMetadataId": "trash-001"
      // targetFolderId ì—†ìŒ â†’ ì›ë˜ ê²½ë¡œë¡œ ë³µêµ¬
    },
    { 
      "trashMetadataId": "trash-002",
      "targetFolderId": "folder-recovered"  // ê²½ë¡œ ì—†ì–´ì„œ ìƒˆ ê²½ë¡œ ì§€ì •
    },
    { 
      "trashMetadataId": "trash-003",
      "exclude": true  // ë³µêµ¬ ì œì™¸ (ì¶©ëŒ íŒŒì¼)
    }
  ]
}
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "message": "ë³µêµ¬ ì‘ì—…ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "queued": 2,
  "excluded": 1,
  "skipped": 0,
  "syncEventIds": ["sync-001", "sync-002"],
  "skippedItems": []
}
```

---

#### 5-2-3. ì „ì²´ ë³µêµ¬ í”„ë¡œì„¸ìŠ¤ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

```mermaid
sequenceDiagram
    participant User as User
    participant UI as Frontend UI
    participant API as API Server
    participant DB as Database
    participant Bull as Bull Queue
    participant Worker as Bull Worker
    participant NAS as NAS

    Note over User,NAS: === 1ë‹¨ê³„: ë³µêµ¬ ê²½ë¡œ ìƒíƒœ í™•ì¸ (ê²½ë¡œëª… ê¸°ì¤€) ===
    
    User->>UI: 1. íœ´ì§€í†µì—ì„œ íŒŒì¼ ì„ íƒ (ì²´í¬ë°•ìŠ¤)
    User->>UI: 2. [ë³µêµ¬] ë²„íŠ¼ í´ë¦­
    
    UI->>API: POST /trash/restore/preview
    Note over UI: trashMetadataIds: [id1, id2, id3]
    
    API->>DB: query files and check paths by pathname
    Note over DB: SELECT id FROM folders<br/>WHERE fullPath = originalPath
    DB-->>API: files with pathStatus, resolveFolderId
    
    API-->>UI: RestorePreviewResponse
    Note over UI: id1: AVAILABLE (resolveFolderId=newId)<br/>id2: NOT_FOUND (resolveFolderId=null)<br/>id3: AVAILABLE (hasConflict=true)
    
    Note over User,NAS: === 2ë‹¨ê³„: ì‚¬ìš©ì ê²½ë¡œ ì„¸íŒ… (Frontend) ===
    
    UI->>UI: 3. ê²½ë¡œ ìƒíƒœ ë¶„ì„ ë° ëª¨ë‹¬ í‘œì‹œ
    
    alt ëª¨ë“  íŒŒì¼ ê²½ë¡œ ìˆìŒ
        UI->>UI: ë°”ë¡œ ë³µêµ¬ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸
        User->>UI: [í™•ì¸] í´ë¦­
    else ê²½ë¡œ ì—†ëŠ” íŒŒì¼ ì¡´ì¬
        UI->>UI: ê²½ë¡œ ì„¸íŒ… ëª¨ë‹¬ í‘œì‹œ
        Note over UI: id1 - ì›ë˜ ìœ„ì¹˜ë¡œ ë³µêµ¬<br/>id2 - ê²½ë¡œ ì„ íƒ í•„ìš” [í´ë” ì„ íƒ]<br/>id3 - ì›ë˜ ìœ„ì¹˜ë¡œ ë³µêµ¬
        
        User->>UI: 4. id2 ë³µêµ¬ ê²½ë¡œ ì„ íƒ
        Note over UI: í´ë” ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸
        UI->>UI: id2.targetFolderId = folder-new ì„¤ì •
        
        User->>UI: [ë³µêµ¬] í´ë¦­
    end
    
    Note over User,NAS: === 3ë‹¨ê³„: ë³µêµ¬ ì‹¤í–‰ ===
    
    UI->>API: POST /trash/restore/execute
    Note over UI: items: [<br/>  {id1},<br/>  {id2, targetFolderId: folder-new},<br/>  {id3}<br/>]
    
    loop for each item
        API->>DB: BEGIN + UPDATE + INSERT sync_events
        API->>Bull: add job (syncEventId)
        API->>DB: COMMIT
    end
    
    API-->>UI: 200 OK (queued: 3, syncEventIds)
    
    UI->>UI: 5. ë³µêµ¬ ì§„í–‰ ìƒíƒœ í‘œì‹œ
    
    Note over Bull,NAS: === Async: Bull Worker ì²˜ë¦¬ ===
    
    par ë³‘ë ¬ ì²˜ë¦¬
        Bull->>Worker: job1
        Worker->>NAS: move file1
        Worker->>DB: sync_events.status = DONE
    and
        Bull->>Worker: job2
        Worker->>NAS: move file2
        Worker->>DB: sync_events.status = DONE
    and
        Bull->>Worker: job3
        Worker->>NAS: move file3
        Worker->>DB: sync_events.status = DONE
    end
    
    Note over UI: ì§„í–‰ ìƒí™© í´ë§ìœ¼ë¡œ ì™„ë£Œ í™•ì¸
    UI->>API: GET /trash/restore/status?syncEventIds=...
    API-->>UI: isCompleted: true
    UI->>User: 6. ë³µêµ¬ ì™„ë£Œ ì•Œë¦¼
```

---

#### 5-2-4. Frontend UI í”Œë¡œìš°

```mermaid
sequenceDiagram
    participant User as User
    participant UI as Frontend UI
    participant API as API Server

    User->>UI: 1. íœ´ì§€í†µì—ì„œ íŒŒì¼ ì„ íƒ (ì²´í¬ë°•ìŠ¤)
    User->>UI: 2. [ë³µêµ¬] ë²„íŠ¼ í´ë¦­
    
    UI->>API: POST /trash/restore/preview
    API-->>UI: RestorePreviewResponse
    
    UI->>UI: 3. ê²½ë¡œ ìƒíƒœ ë¶„ì„
    
    alt ëª¨ë“  íŒŒì¼ ê²½ë¡œ ìˆìŒ + ì¶©ëŒ ì—†ìŒ
        UI->>UI: ë°”ë¡œ ë³µêµ¬ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ
        User->>UI: [í™•ì¸] í´ë¦­
        UI->>API: POST /trash/restore/execute
    else ê²½ë¡œ ì—†ëŠ” íŒŒì¼ ì¡´ì¬ ë˜ëŠ” ì¶©ëŒ ìˆìŒ
        UI->>UI: ê²½ë¡œ ì„¸íŒ… ëª¨ë‹¬ í‘œì‹œ
        Note over UI: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br/>â”‚ íŒŒì¼ëª…     â”‚ ìƒíƒœ     â”‚ ë³µêµ¬ ê²½ë¡œ   â”‚<br/>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br/>â”‚ 111.txt   â”‚ O ê²½ë¡œìˆìŒâ”‚ /projects/ â”‚<br/>â”‚ 222.txt   â”‚ X ê²½ë¡œì—†ìŒâ”‚ [ê²½ë¡œ ì„ íƒ]â”‚<br/>â”‚ 333.txt   â”‚ ! ì¶©ëŒ   â”‚ [ì œì™¸] ì²´í¬â”‚<br/>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        
        alt ì‚¬ìš©ìê°€ ê²½ë¡œ ì§€ì •
            User->>UI: 222.txt ë³µêµ¬ ê²½ë¡œ ì„ íƒ
            Note over UI: í´ë” ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸ â†’ /recovered/
            UI->>UI: [ë³µêµ¬] ë²„íŠ¼ í™œì„±í™”
        else ì‚¬ìš©ìê°€ ì œì™¸ ì„ íƒ
            User->>UI: 222.txt [ì œì™¸] ì²´í¬
            UI->>UI: [ë³µêµ¬] ë²„íŠ¼ í™œì„±í™” (222.txt ì œì™¸)
        end
        
        User->>UI: [ë³µêµ¬] í´ë¦­
        UI->>API: POST /trash/restore/execute
    end
    
    API-->>UI: 200 OK (syncEventIds)
    UI->>UI: 5. ë³µêµ¬ ì§„í–‰ ìƒíƒœ í‘œì‹œ
    
    loop ì§„í–‰ ìƒí™© í´ë§
        UI->>API: GET /trash/restore/status?syncEventIds=...
        API-->>UI: summary, isCompleted
        alt isCompleted = false
            UI->>UI: ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        else isCompleted = true
            UI->>User: 6. ë³µêµ¬ ì™„ë£Œ ì•Œë¦¼
        end
    end
```

**UI ëª¨ë‹¬ ì˜ˆì‹œ:**

> **ìƒíƒœ í‘œì‹œ ê¸°ì¤€:** ê²½ë¡œëª…ìœ¼ë¡œ í´ë” ì¡´ì¬ ì—¬ë¶€ í™•ì¸
> - âœ… ê²½ë¡œìˆìŒ: ë™ì¼ ê²½ë¡œëª…ì˜ í´ë”ê°€ ì¡´ì¬ â†’ ìë™ ë³µêµ¬ ê°€ëŠ¥
> - âš ï¸ ê²½ë¡œì—†ìŒ: í•´ë‹¹ ê²½ë¡œëª…ì˜ í´ë”ê°€ ì—†ìŒ â†’ ê²½ë¡œ ì„ íƒ í•„ìš”
> - â›” ì¶©ëŒ: ë³µêµ¬ ìœ„ì¹˜ì— ë™ì¼ íŒŒì¼ ì¡´ì¬ â†’ ë³µêµ¬ ë¶ˆê°€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  íŒŒì¼ ë³µêµ¬                                            [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ì„ íƒí•œ 3ê°œ íŒŒì¼ì˜ ë³µêµ¬ ê²½ë¡œë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.                  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ íŒŒì¼ëª…        â”‚ ìƒíƒœ      â”‚ ë³µêµ¬ ê²½ë¡œ               â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ 111.txt       â”‚ âœ… ê²½ë¡œìˆìŒâ”‚ /projects/2024/        â”‚   â”‚
â”‚  â”‚               â”‚           â”‚ â˜ ë‹¤ë¥¸ ê²½ë¡œ ì§€ì •        â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ 222.txt       â”‚ âš ï¸ ê²½ë¡œì—†ìŒâ”‚ [ğŸ“ ê²½ë¡œ ì„ íƒ]         â”‚   â”‚
â”‚  â”‚               â”‚           â”‚ â˜ ë³µêµ¬ì—ì„œ ì œì™¸         â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ 333.txt       â”‚ â›” ì¶©ëŒ    â”‚ ë™ì¼ íŒŒì¼ ì¡´ì¬          â”‚   â”‚
â”‚  â”‚               â”‚           â”‚ â˜‘ ë³µêµ¬ì—ì„œ ì œì™¸         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  âš ï¸ ê²½ë¡œê°€ ì—†ëŠ” íŒŒì¼ì€ ë³µêµ¬ ê²½ë¡œë¥¼ ì§€ì •í•˜ê±°ë‚˜ ì œì™¸í•´ì£¼ì„¸ìš”.    â”‚
â”‚  â›” ì¶©ëŒ íŒŒì¼ì€ ê´€ë¦¬ì ë¬¸ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.                      â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              [ì·¨ì†Œ]  [ë³µêµ¬] (ë¹„í™œì„±í™”)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

â†“ 222.txt ê²½ë¡œ ì„ íƒ í›„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ 222.txt       â”‚ âœ… ê²½ë¡œì§€ì •â”‚ /documents/recovered/  â”‚   â”‚
â”‚  â”‚               â”‚           â”‚ [ë³€ê²½]                 â”‚   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              [ì·¨ì†Œ]  [ë³µêµ¬] â† í™œì„±í™”        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5-3. GET /trash/restore/status - ë³µêµ¬ ì§„í–‰ ìƒí™© ì¡°íšŒ

> **ìš©ë„:** POST /trash/restore/execute í˜¸ì¶œ í›„ ë°˜í™˜ëœ `syncEventIds`ë¡œ ì§„í–‰ ìƒí™© í™•ì¸

```mermaid
sequenceDiagram
    participant User as User
    participant API as API Server
    participant DB as Database

    User->>API: GET /trash/restore/status?syncEventIds=id1,id2,id3
    
    API->>DB: 1. query sync_events by ids
    Note over DB: SELECT * FROM sync_events<br/>WHERE id IN (id1, id2, id3)
    DB-->>API: sync_events list with status
    
    API->>API: 2. aggregate status
    
    API-->>User: 200 OK (summary, items[])
```

**ìš”ì²­:**
```
GET /trash/restore/status?syncEventIds=sync-001,sync-002,sync-003
```

**ì‘ë‹µ êµ¬ì¡°:**
```typescript
interface RestoreStatusResponse {
  // ì „ì²´ ìš”ì•½
  summary: {
    total: number;
    pending: number;      // ëŒ€ê¸°ì¤‘
    processing: number;   // ì²˜ë¦¬ì¤‘
    done: number;         // ì™„ë£Œ
    failed: number;       // ì‹¤íŒ¨
  };
  
  // ì „ì²´ ì™„ë£Œ ì—¬ë¶€
  isCompleted: boolean;   // pending=0 && processing=0
  
  // ê°œë³„ í•­ëª© ìƒíƒœ
  items: {
    syncEventId: string;
    fileId: string;
    fileName: string;
    status: 'PENDING' | 'PROCESSING' | 'DONE' | 'FAILED';
    errorMessage?: string;
    createdAt: Date;
    processedAt?: Date;
  }[];
}
```

**ì‚¬ìš© ì˜ˆì‹œ:**
```typescript
// 1. ë³µêµ¬ ì‹¤í–‰
const response = await fetch('POST /trash/restore/execute', {
  body: JSON.stringify({ items: [...] })
});
const { syncEventIds } = await response.json();

// 2. ì§„í–‰ ìƒí™© í´ë§
const checkStatus = async () => {
  const status = await fetch(
    `GET /trash/restore/status?syncEventIds=${syncEventIds.join(',')}`
  );
  const { isCompleted, summary } = await status.json();
  
  console.log(`ì§„í–‰: ${summary.done}/${summary.total} ì™„ë£Œ`);
  
  if (!isCompleted) {
    setTimeout(checkStatus, 2000); // 2ì´ˆ í›„ ì¬í™•ì¸
  } else {
    console.log('ëª¨ë“  ë³µì› ì™„ë£Œ!');
    if (summary.failed > 0) {
      console.log(`${summary.failed}ê°œ íŒŒì¼ ë³µì› ì‹¤íŒ¨`);
    }
  }
};

checkStatus();
```

---

## 6. ìë™ ì˜êµ¬ì‚­ì œ (ë°°ì¹˜)

### 6-1. ë§Œë£Œëœ íœ´ì§€í†µ í•­ëª© ìë™ ì‚­ì œ

```mermaid
sequenceDiagram
    participant Scheduler as Scheduler (Cron)
    participant API as API Server
    participant DB as FileMetaDataServer
    participant Bull as Bull Queue

    Note over Scheduler: ë§¤ì¼ ìì • ì‹¤í–‰ (0 0 * * *)
    
    Scheduler->>API: trigger cleanup job
    
    API->>DB: 1. get expired trash items
    Note over DB: SELECT * FROM trash_metadata<br/>WHERE expiresAt < NOW()
    DB-->>API: expired items list
    
    loop for each expired item
        API->>API: call deleteFileFromTrash(trashMetadataId)
    end
    
    API->>Scheduler: complete (deleted: N, failed: M)
```

---

## 7. NAS ê²½ë¡œ ê·œì¹™

### 7-1. íœ´ì§€í†µ ê²½ë¡œ êµ¬ì¡°

```mermaid
flowchart LR
    subgraph Original["ì›ë³¸ ê²½ë¡œ"]
        A["/documents/project/report.pdf"]
    end
    
    subgraph Trash["íœ´ì§€í†µ ê²½ë¡œ"]
        B["/.trash/{trashMetadataId}/documents/project/report.pdf"]
    end
    
    Original -->|"DELETE /files/{id}"| Trash
    Trash -->|"POST /trash/files/{id}/restore"| Original
    Trash -->|"DELETE /trash/files/{id}"| C["ì˜êµ¬ ì‚­ì œ"]
```

### 7-2. sync_events eventType ì •ë¦¬

| eventType | ì„¤ëª… | metadata |
|-----------|------|----------|
| `TRASH` | íŒŒì¼ íœ´ì§€í†µ ì´ë™ | `{ originalPath, originalFolderId }` |
| `RESTORE` | íŒŒì¼ ë³µêµ¬ | `{ trashPath, restorePath }` |
| `PURGE` | íŒŒì¼ ì˜êµ¬ ì‚­ì œ | `{ trashPath }` |

---

## 8. ìƒíƒœ ì¡°íšŒ

### 8-1. GET /sync-events/{syncEventId} - ë™ê¸°í™” ìƒíƒœ ì¡°íšŒ

```mermaid
sequenceDiagram
    participant User as User
    participant API as API Server
    participant DB as FileMetaDataServer

    User->>API: GET /sync-events/{syncEventId}
    
    API->>DB: query sync_event
    DB-->>API: sync_event info
    
    alt not found
        API-->>User: 404 SYNC_EVENT_NOT_FOUND
    end
    
    API-->>User: 200 OK (id, eventType, status, retryCount, errorMessage, timestamps)
```

**ì‘ë‹µ êµ¬ì¡°:**
```typescript
interface SyncEventResponse {
  id: string;
  eventType: 'TRASH' | 'RESTORE' | 'PURGE';
  status: 'PENDING' | 'PROCESSING' | 'DONE' | 'FAILED';
  retryCount: number;
  errorMessage?: string;
  metadata: Record<string, any>;
  createdAt: Date;
  processedAt?: Date;
}
```

---

## ì°¸ê³ 

- [005-1.íŒŒì¼_ì²˜ë¦¬_FLOW.md](../íŒŒì¼/005-1.íŒŒì¼_ì²˜ë¦¬_FLOW.md) - íŒŒì¼ ì²˜ë¦¬ FLOW (4-1 íŒŒì¼ ì‚­ì œ)
- [008-1.í´ë”_ì²˜ë¦¬_FLOW.md](../í´ë”/008-1.í´ë”_ì²˜ë¦¬_FLOW.md) - í´ë” ì²˜ë¦¬ FLOW (4-1 í´ë” ì‚­ì œ - ë¹ˆ í´ë” ì¦‰ì‹œ ì‚­ì œ)
- [060.íœ´ì§€í†µ_version0.0.1.md](./060.íœ´ì§€í†µ_version0.0.1.md) - íœ´ì§€í†µ ìƒì„¸ ë¬¸ì„œ (ë ˆê±°ì‹œ)
- [001.ì •ì˜.md](../001.ì •ì˜.md) - ê³µí†µ ì‚¬í•­
- [050.íê´€ë¦¬.md](../050.íê´€ë¦¬.md) - Bull í ê´€ë¦¬
